\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{okithm}[2018/03/08 v0.14]


% ======== Options ========
\RequirePackage{kvoptions}

\DeclareBoolOption[true]{thm}
\DeclareComplementaryOption{nothm}{thm}
\DeclareBoolOption[true]{alg}
\DeclareComplementaryOption{noalg}{alg}
\DeclareStringOption[section]{numberwithin}
\DeclareStringOption[long]{optstyle}
\ProcessKeyvalOptions*{}


% ======== Theorems ========

\ifokithm@thm
  \RequirePackage{amsthm}
  \RequirePackage{thmtools}
  
  \declaretheoremstyle[
    bodyfont=\normalfont\itshape,
    postheadspace=5pt,
    spaceabove=0.3\baselineskip,
    spacebelow=0.3\baselineskip,
  ]{thmstyle}

  \declaretheoremstyle[
    postheadspace=5pt,
    spaceabove=0.3\baselineskip,
    spacebelow=0.3\baselineskip,
  ]{defstyle}

  \declaretheoremstyle[
    postheadspace=5pt,
    spaceabove=0.3\baselineskip,
    spacebelow=0.3\baselineskip,
    qed=\qedsymbol,
  ]{exstyle}

  \declaretheoremstyle[
    headfont=\normalfont\itshape,
    postheadspace=5pt,
    spaceabove=0.3\baselineskip,
    spacebelow=0.3\baselineskip,
    qed=\qedsymbol,
  ]{proofstyle}

  \declaretheorem[name=Theorem,     style=thmstyle, numberwithin=\okithm@numberwithin]{theorem}
  \declaretheorem[name=Definition,  style=defstyle, sibling=theorem]{definition}
  \declaretheorem[name=Lemma,       style=thmstyle, sibling=theorem]{lemma}
  \declaretheorem[name=Proposition, style=thmstyle, sibling=theorem]{proposition}
  \declaretheorem[name=Corollary,   style=thmstyle, sibling=theorem]{corollary}
  \declaretheorem[name=Example,     style=exstyle,  sibling=theorem]{example}
  \declaretheorem[name=Remark,      style=defstyle, sibling=theorem]{remark}

  % proof
  \let\proof\@undefined
  \let\endproof\@undefined
  \declaretheorem[name=Proof, style=proofstyle, numbered=no]{proof}
\fi


% ======== Algorithm ========
\ifokithm@alg
  \RequirePackage{algorithm}
  \RequirePackage[noend]{algpseudocode}

  \algnewcommand\algorithmicinput{\makebox[\widthof{\textbf{Output}}][l]{\textbf{Input}}\textbf{:}}
  \algnewcommand\Input{\item[\algorithmicinput]}
  \algnewcommand\algorithmicoutput{\textbf{Output:}}
  \algnewcommand\Output{\item[\algorithmicoutput]}

  \algnewcommand\algorithmicto{\textbf{to}}
  \algdef{SE}[FOR]{ForTo}{EndFor}[2]{\algorithmicfor\ #1 \algorithmicto\ #2 \algorithmicdo}{\algorithmicend\ \algorithmicfor}\algtext*{EndFor}
\fi


% ======== Enumeration ========
\RequirePackage{enumitem}

\setlist{leftmargin=*}
\setlist[1]{labelindent=\parindent}
